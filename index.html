<!DOCTYPE HTML>
<html lang="ru-RU">
<head>
    <meta charset="utf-8">
    <title>Talkrooms</title>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, width=device-width">
    <link rel="stylesheet" href="/style/common.css">
    <link rel="stylesheet" href="/style/room.css">
    <link rel="stylesheet" href="/style/profile.css">
    <link rel="icon" type="image/png" href="/style/ecih.png">
</head>
<body>

<div id="room">
<div id="side">
    <div class="side-scrollable">
        <h1 class="talkrooms">Talkrooms</h1>
        <div class="room-users"></div>
    </div>
</div>
<div id="talk">
    <div class="talk-header">
        <div class="placeholder"></div>
        <div class="sticky">
            <div class="content">
                <svg class="notifications" width="35" height="24" title="Звуковой сигнал при получении сообщений">
                    <path class="bell" d="M 10 18 C 12 16 12.5 13 12.5 9.25 C 12.5 3 22.5 3 22.5 9.25 C 22.5 13 23 16 25 18 z" fill="none" stroke="#737373" stroke-width="2" stroke-linejoin="round"/>
                    <g class="bell-parts" fill="#737373">
                        <path d="M 14.337 20 A 3.5 2.5 0 0 0 20.663 20 z"/>
                        <circle cx="17.5" cy="3.5" r="1.5"/>
                    </g>
                    <g stroke="#1278B3" fill="none">
                        <path class="bell-sound-1" d="M 28.626 6.8 a 12.5 12.5 0 0 1 0 11.4 M6.374 6.8 a 12.5 12.5 0 0 0 0 11.4"/>
                        <path class="bell-sound-2" d="M 32.186 4.98 a 16.5 16.5 0 0 1 0 15.04 M2.814 4.98 a 16.5 16.5 0 0 0 0 15.04"/>
                    </g>
                </svg>
                <h2 class="topic"></h2>
                <div class="date">
                    <span class="date-text">&nbsp;</span>
                </div>
            </div>
        </div>
    </div>
    <div class="talk-messages">
        <div class="talk-previous">Показать предыдущие сообщения</div>
    </div>
    <form class="talk-reply">
        <div class="sticky">
            <div class="content">
                <svg class="reply-send" title="Отправить">
                    <path d="M31,24 l9,-9 l9,9 M40,15 v19 c0,4 -3,7 -7,7" fill="none" stroke="#999" stroke-width="2"/>
                </svg>
                <div class="reply-wrapper">
                    <div class="userpic"></div>
                    <div class="reply-public" title="Сообщение для всех">&times;</div>
                    <div class="reply-recipient"></div>
                    <div class="reply-field">
                        <textarea name="text"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<div class="popup" id="profile">
    <form class="section" id="profile-edit">
        <label for="my-nickname">Имя</label>
        <input type="text" id="my-nickname" maxlength="32">
        <div class="submit">
            <button type="submit">Сохранить</button>
        </div>
    </form>
    <div class="section" id="profile-details">
        <div class="details-userpic"></div>
        <div class="details-nickname"></div>
        <div class="details-link"></div>
        <div class="button details-edit">Редактировать</div>
    </div>
    <div class="section" id="profile-ignore">
        <div class="ignore-off">
            <div class="button">В игнор!</div>
            <p class="hint">Продолжит писать сообщения, но другие посетители их не увидят</p>
        </div>
        <div class="ignore-on">
            <div class="ignored">В игноре <span class="ignore-cancel" title="Выпустить"></span></div>
            <p class="hint">Может писать сообщения, но другие посетители их не видят</p>
            <div class="button ignore-clear">Удалить сообщения с <span class="ignore-after"></span></div>
        </div>
        <div class="ignore-denied">
            <p>Тоже модератор</p>
        </div>
    </div>
    <div class="section" id="profile-login">
        <p>Войдите через
            <a class="login-fb" href="/api/login/facebook">Фейсбук</a>,
            <a class="login-vk" href="/api/login/vk">Вконтакте</a> или
            <a class="login-ok" href="/api/login/ok">Одноклассники</a>
        </p>
        <p class="hint">чтобы загрузить оттуда фотографию и зарезервировать имя</p>
    </div>
    <div class="section" id="profile-logout">
        <a href="/api/logout">Выйти</a>
    </div>
</div>

<script type="text/html" id="message-template">
<div class="message" data-id="{message_id}">
    <time class="msg-time" datetime="{created}">{time}</time>
    <div class="msg-content">
        <div class="msg-author">
            <div class="userpic" style="background-image: url({userpicUrl});"></div>
            <span class="nickname">{nickname}</span>
        </div>
        <p class="msg-text">{content}</p>
    </div>
</div>
</script>

<script type="text/html" id="user-template">
<div class="user" data-socket="{socket_id}">
    <div class="userpic" style="background-image: url({userpicUrl});"></div>
    <span class="nickname">{nickname}</span>
</div>
</script>

<audio id="notifier">
    <source src="/script/sound/message.mp3" type="audio/mp3">
    <source src="/script/sound/message.ogg" type="audio/ogg">
</audio>

<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="/script/utility.js"></script>
<script src="/script/collection.js"></script>
<script src="/script/events.js"></script>
<script src="/script/rest.js"></script>

<script src="/script/models/room.js"></script>
<script src="/script/models/users.js"></script>
<script src="/script/models/userpics.js"></script>

<script src="/script/views/side.js"></script>
<script src="/script/views/talk.js"></script>
<script src="/script/views/reply.js"></script>
<script src="/script/views/profile.js"></script>

<script>
Room.enter('main');
</script>

</body>
</html>
